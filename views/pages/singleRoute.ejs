<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=0">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
          integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
          crossorigin=""/>

    <!-- Leaflet routing machine -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />

    <!-- Geocoder -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />

    <!-- JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
</head>
<body>
    <% function stripEndQuotes(s){
        var t=s.length;
        if (s.charAt(0)=='"') s=s.substring(1,t--);
        if (s.charAt(--t)=='"') s=s.substring(0,t);
        return s;
    }%>

    <%- include('partial/navbar', {active: "Home"}); %>

    <main role="main">
        <div class="row" style="padding:10px">
            <div class="container-fluid">
                <h1 style="color:blue; text-align:center">Route Editor</h1>
            </div>
        </div>
        <div class="row" style="padding:10px;">
            <div class="col-12 col-md-6">
                <div id="map"></div>
            </div>
            <div class="col-12 col-md-6">
                <h1>Edit Route</h1>
                    <form action="item/update" method="POST" >
                        <input type = "hidden" name = "_id" value="<%= stripEndQuotes(JSON.stringify(result[0]._id)) %>"/>
                        Route:<br />
                        <textarea id="route" style="width:100%; height:300px" type="text" name="geoJson">
                            <%= stripEndQuotes(JSON.stringify(result[0].geoJson, null, 2)) %>
                        </textarea>
                        Name:<br />
                        <input type="text" name="name" value="<%= stripEndQuotes(JSON.stringify(result[0].name)) %>"/><br>
                        Description:<br />
                        <input type="text" name="description" value="<%= stripEndQuotes(JSON.stringify(result[0].description)) %>"/><br>
                        Date:
                        <br />
                        <input name = "date" value="<%= stripEndQuotes(JSON.stringify(result[0].date)) %>"/><br>
                        Time:<br />
                        <input name = "time" value="<%= stripEndQuotes(JSON.stringify(result[0].time)) %>"/>
                        <br/>
                        <input type="submit" value="Update" />

                    </form>

                    <form action="item/delete" method="GET" >
                        <input type = "hidden" name = "_id" value="<%= JSON.stringify(result[0]._id).replace(/"/g, '') %>"/>
                        <input type="submit" value="Delete " />
                    </form>
            </div>
        </div>
    </main>

</body>
</html>

<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
        integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
        crossorigin=""></script>
<script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

<script type="text/javascript" src = "scripts/arrayFunctions.js"></script>
<script type="text/javascript" src = "scripts/geoJson/polygon-select-teuto.js"></script>
<script type="text/javascript" src = "scripts/geoJson/teutogeo.js"></script>
<script type="text/javascript" src = "scripts/routeEditor.js"></script>
